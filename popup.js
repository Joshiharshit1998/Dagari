/*! For license information please see popup.js.LICENSE.txt */
(()=>{"use strict";var e,t,s,i,r,o,n,a,l,u,c,g="4.1.0";!function(e){e.AnonymousId="anonymous_id",e.DistinctId="distinct_id",e.Props="props",e.FeatureFlagDetails="feature_flag_details",e.FeatureFlags="feature_flags",e.FeatureFlagPayloads="feature_flag_payloads",e.BootstrapFeatureFlagDetails="bootstrap_feature_flag_details",e.BootstrapFeatureFlags="bootstrap_feature_flags",e.BootstrapFeatureFlagPayloads="bootstrap_feature_flag_payloads",e.OverrideFeatureFlags="override_feature_flags",e.Queue="queue",e.OptedOut="opted_out",e.SessionId="session_id",e.SessionStartTimestamp="session_start_timestamp",e.SessionLastTimestamp="session_timestamp",e.PersonProperties="person_properties",e.GroupProperties="group_properties",e.InstalledAppBuild="installed_app_build",e.InstalledAppVersion="installed_app_version",e.SessionReplay="session_replay",e.SurveyLastSeenDate="survey_last_seen_date",e.SurveysSeen="surveys_seen",e.Surveys="surveys",e.RemoteConfig="remote_config",e.FlagsEndpointWasHit="flags_endpoint_was_hit"}(e||(e={})),function(e){e.GZipJS="gzip-js",e.Base64="base64"}(t||(t={})),function(e){e.Left="left",e.Right="right",e.Center="center"}(s||(s={})),function(e){e.Button="button",e.Tab="tab",e.Selector="selector"}(i||(i={})),function(e){e.Popover="popover",e.API="api",e.Widget="widget"}(r||(r={})),function(e){e.Html="html",e.Text="text"}(o||(o={})),function(e){e.Number="number",e.Emoji="emoji"}(n||(n={})),function(e){e.Open="open",e.MultipleChoice="multiple_choice",e.SingleChoice="single_choice",e.Rating="rating",e.Link="link"}(a||(a={})),function(e){e.NextQuestion="next_question",e.End="end",e.ResponseBased="response_based",e.SpecificQuestion="specific_question"}(l||(l={})),function(e){e.Regex="regex",e.NotRegex="not_regex",e.Exact="exact",e.IsNot="is_not",e.Icontains="icontains",e.NotIcontains="not_icontains"}(u||(u={})),function(e){e.Contains="contains",e.Exact="exact",e.Regex="regex"}(c||(c={}));const h=e=>{if("flags"in e){const t=p(e.flags),s=f(e.flags);return{...e,featureFlags:t,featureFlagPayloads:s}}{const t=e.featureFlags??{},s=Object.fromEntries(Object.entries(e.featureFlagPayloads||{}).map((([e,t])=>[e,y(t)]))),i=Object.fromEntries(Object.entries(t).map((([e,t])=>[e,d(e,t,s[e])])));return{...e,featureFlags:t,featureFlagPayloads:s,flags:i}}};function d(e,t,s){return{key:e,enabled:"string"==typeof t||t,variant:"string"==typeof t?t:void 0,reason:void 0,metadata:{id:void 0,version:void 0,payload:s?JSON.stringify(s):void 0,description:void 0}}}const p=e=>Object.fromEntries(Object.entries(e??{}).map((([e,t])=>[e,m(t)])).filter((([,e])=>void 0!==e))),f=e=>{const t=e??{};return Object.fromEntries(Object.keys(t).filter((e=>{const s=t[e];return s.enabled&&s.metadata&&void 0!==s.metadata.payload})).map((e=>{const s=t[e].metadata?.payload;return[e,s?y(s):void 0]})))},m=e=>void 0===e?void 0:e.variant??e.enabled,y=e=>{if("string"!=typeof e)return e;try{return JSON.parse(e)}catch{return e}},P=(e,t)=>{const s=[...new Set([...Object.keys(e??{}),...Object.keys(t??{})])].filter((s=>!!e[s]||!!t[s])).reduce(((t,s)=>(t[s]=e[s]??!0,t)),{});return h({featureFlags:s,featureFlagPayloads:t??{}})};function A(e){return"string"==typeof e||e}function b(e){return"string"==typeof e?e:void 0}function F(){return(new Date).toISOString()}function v(e,t){const s=setTimeout(e,t);return s?.unref&&s?.unref(),s}const w=e=>e instanceof Error;function _(e){return Promise.all(e.map((e=>(e??Promise.resolve()).then((e=>({status:"fulfilled",value:e})),(e=>({status:"rejected",reason:e}))))))}async function S(e,t=!0){try{const t=new Blob([e],{type:"text/plain"}).stream().pipeThrough(new CompressionStream("gzip"));return await new Response(t).blob()}catch(e){return t&&console.error("Failed to gzip compress data",e),null}}class I{constructor(){this.events={},this.events={}}on(e,t){return this.events[e]||(this.events[e]=[]),this.events[e].push(t),()=>{this.events[e]=this.events[e].filter((e=>e!==t))}}emit(e,t){for(const s of this.events[e]||[])s(t);for(const s of this.events["*"]||[])s(e,t)}}const C="0123456789abcdef";class D{constructor(e){this.bytes=e}static ofInner(e){if(16!==e.length)throw new TypeError("not 128-bit length");return new D(e)}static fromFieldsV7(e,t,s,i){if(!Number.isInteger(e)||!Number.isInteger(t)||!Number.isInteger(s)||!Number.isInteger(i)||e<0||t<0||s<0||i<0||e>0xffffffffffff||t>4095||s>1073741823||i>4294967295)throw new RangeError("invalid field value");const r=new Uint8Array(16);return r[0]=e/2**40,r[1]=e/2**32,r[2]=e/2**24,r[3]=e/65536,r[4]=e/256,r[5]=e,r[6]=112|t>>>8,r[7]=t,r[8]=128|s>>>24,r[9]=s>>>16,r[10]=s>>>8,r[11]=s,r[12]=i>>>24,r[13]=i>>>16,r[14]=i>>>8,r[15]=i,new D(r)}static parse(e){let t;switch(e.length){case 32:t=/^[0-9a-f]{32}$/i.exec(e)?.[0];break;case 36:t=/^([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})$/i.exec(e)?.slice(1,6).join("");break;case 38:t=/^\{([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})\}$/i.exec(e)?.slice(1,6).join("");break;case 45:t=/^urn:uuid:([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})$/i.exec(e)?.slice(1,6).join("")}if(t){const e=new Uint8Array(16);for(let s=0;s<16;s+=4){const i=parseInt(t.substring(2*s,2*s+8),16);e[s+0]=i>>>24,e[s+1]=i>>>16,e[s+2]=i>>>8,e[s+3]=i}return new D(e)}throw new SyntaxError("could not parse UUID string")}toString(){let e="";for(let t=0;t<this.bytes.length;t++)e+=C.charAt(this.bytes[t]>>>4),e+=C.charAt(15&this.bytes[t]),3!==t&&5!==t&&7!==t&&9!==t||(e+="-");return e}toHex(){let e="";for(let t=0;t<this.bytes.length;t++)e+=C.charAt(this.bytes[t]>>>4),e+=C.charAt(15&this.bytes[t]);return e}toJSON(){return this.toString()}getVariant(){const e=this.bytes[8]>>>4;if(e<0)throw new Error("unreachable");if(e<=7)return this.bytes.every((e=>0===e))?"NIL":"VAR_0";if(e<=11)return"VAR_10";if(e<=13)return"VAR_110";if(e<=15)return this.bytes.every((e=>255===e))?"MAX":"VAR_RESERVED";throw new Error("unreachable")}getVersion(){return"VAR_10"===this.getVariant()?this.bytes[6]>>>4:void 0}clone(){return new D(this.bytes.slice(0))}equals(e){return 0===this.compareTo(e)}compareTo(e){for(let t=0;t<16;t++){const s=this.bytes[t]-e.bytes[t];if(0!==s)return Math.sign(s)}return 0}}class B{constructor(e){this.timestamp=0,this.counter=0,this.random=e??E()}generate(){return this.generateOrResetCore(Date.now(),1e4)}generateOrAbort(){return this.generateOrAbortCore(Date.now(),1e4)}generateOrResetCore(e,t){let s=this.generateOrAbortCore(e,t);return void 0===s&&(this.timestamp=0,s=this.generateOrAbortCore(e,t)),s}generateOrAbortCore(e,t){if(!Number.isInteger(e)||e<1||e>0xffffffffffff)throw new RangeError("`unixTsMs` must be a 48-bit positive integer");if(t<0||t>0xffffffffffff)throw new RangeError("`rollbackAllowance` out of reasonable range");if(e>this.timestamp)this.timestamp=e,this.resetCounter();else{if(!(e+t>=this.timestamp))return;this.counter++,this.counter>4398046511103&&(this.timestamp++,this.resetCounter())}return D.fromFieldsV7(this.timestamp,Math.trunc(this.counter/2**30),this.counter&2**30-1,this.random.nextUint32())}resetCounter(){this.counter=1024*this.random.nextUint32()+(1023&this.random.nextUint32())}generateV4(){const e=new Uint8Array(Uint32Array.of(this.random.nextUint32(),this.random.nextUint32(),this.random.nextUint32(),this.random.nextUint32()).buffer);return e[6]=64|e[6]>>>4,e[8]=128|e[8]>>>2,D.ofInner(e)}}const E=()=>({nextUint32:()=>65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random())});let k;const O=()=>x().toString(),x=()=>(k||(k=new B)).generate();class M extends Error{constructor(e,t){super("HTTP error while fetching PostHog: status="+e.status+", reqByteLength="+t),this.response=e,this.reqByteLength=t,this.name="PostHogFetchHttpError"}get status(){return this.response.status}get text(){return this.response.text()}get json(){return this.response.json()}}class T extends Error{constructor(e){super("Network error while fetching PostHog",e instanceof Error?{cause:e}:{}),this.error=e,this.name="PostHogFetchNetworkError"}}const R=(e,t)=>void 0!==t?{[e]:t}:{};async function j(e){if(e instanceof M){let t="";try{t=await e.text}catch{}console.error(`Error while flushing PostHog: message=${e.message}, response body=${t}`,e)}else console.error("Error while flushing PostHog",e);return Promise.resolve()}function q(e){return"object"==typeof e&&(e instanceof M||e instanceof T)}function z(e){return"object"==typeof e&&e instanceof M&&413===e.status}var H;!function(e){e.FeatureFlags="feature_flags",e.Recordings="recordings"}(H||(H={}));class L{constructor(e,t){var s;this.flushPromise=null,this.shutdownPromise=null,this.pendingPromises={},this._events=new I,this._isInitialized=!1,function(e){if(!e||"string"!=typeof e||function(e){return 0===e.trim().length}(e))throw new Error("You must pass your PostHog project's api key.")}(e),this.apiKey=e,this.host=(s=t?.host||"https://us.i.posthog.com",s?.replace(/\/+$/,"")),this.flushAt=t?.flushAt?Math.max(t?.flushAt,1):20,this.maxBatchSize=Math.max(this.flushAt,t?.maxBatchSize??100),this.maxQueueSize=Math.max(this.flushAt,t?.maxQueueSize??1e3),this.flushInterval=t?.flushInterval??1e4,this.preloadFeatureFlags=t?.preloadFeatureFlags??!0,this.defaultOptIn=t?.defaultOptIn??!0,this.disableSurveys=t?.disableSurveys??!1,this._retryOptions={retryCount:t?.fetchRetryCount??3,retryDelay:t?.fetchRetryDelay??3e3,retryCheck:q},this.requestTimeout=t?.requestTimeout??1e4,this.featureFlagsRequestTimeoutMs=t?.featureFlagsRequestTimeoutMs??3e3,this.remoteConfigRequestTimeoutMs=t?.remoteConfigRequestTimeoutMs??3e3,this.disableGeoip=t?.disableGeoip??!0,this.disabled=t?.disabled??!1,this.historicalMigration=t?.historicalMigration??!1,this._initPromise=Promise.resolve(),this._isInitialized=!0,this.disableCompression=!("CompressionStream"in globalThis)||(t?.disableCompression??!1)}logMsgIfDebug(e){this.isDebug&&e()}wrap(e){if(!this.disabled)return this._isInitialized?e():void this._initPromise.then((()=>e()));this.logMsgIfDebug((()=>console.warn("[PostHog] The client is disabled")))}getCommonEventProperties(){return{$lib:this.getLibraryId(),$lib_version:this.getLibraryVersion()}}get optedOut(){return this.getPersistedProperty(e.OptedOut)??!this.defaultOptIn}async optIn(){this.wrap((()=>{this.setPersistedProperty(e.OptedOut,!1)}))}async optOut(){this.wrap((()=>{this.setPersistedProperty(e.OptedOut,!0)}))}on(e,t){return this._events.on(e,t)}debug(e=!0){if(this.removeDebugCallback?.(),e){const e=this.on("*",((e,t)=>console.log("PostHog Debug",e,t)));this.removeDebugCallback=()=>{e(),this.removeDebugCallback=void 0}}}get isDebug(){return!!this.removeDebugCallback}get isDisabled(){return this.disabled}buildPayload(e){return{distinct_id:e.distinct_id,event:e.event,properties:{...e.properties||{},...this.getCommonEventProperties()}}}addPendingPromise(e){const t=O();return this.pendingPromises[t]=e,e.catch((()=>{})).finally((()=>{delete this.pendingPromises[t]})),e}identifyStateless(e,t,s){this.wrap((()=>{const i={...this.buildPayload({distinct_id:e,event:"$identify",properties:t})};this.enqueue("identify",i,s)}))}async identifyStatelessImmediate(e,t,s){const i={...this.buildPayload({distinct_id:e,event:"$identify",properties:t})};await this.sendImmediate("identify",i,s)}captureStateless(e,t,s,i){this.wrap((()=>{const r=this.buildPayload({distinct_id:e,event:t,properties:s});this.enqueue("capture",r,i)}))}async captureStatelessImmediate(e,t,s,i){const r=this.buildPayload({distinct_id:e,event:t,properties:s});await this.sendImmediate("capture",r,i)}aliasStateless(e,t,s,i){this.wrap((()=>{const r=this.buildPayload({event:"$create_alias",distinct_id:t,properties:{...s||{},distinct_id:t,alias:e}});this.enqueue("alias",r,i)}))}async aliasStatelessImmediate(e,t,s,i){const r=this.buildPayload({event:"$create_alias",distinct_id:t,properties:{...s||{},distinct_id:t,alias:e}});await this.sendImmediate("alias",r,i)}groupIdentifyStateless(e,t,s,i,r,o){this.wrap((()=>{const n=this.buildPayload({distinct_id:r||`$${e}_${t}`,event:"$groupidentify",properties:{$group_type:e,$group_key:t,$group_set:s||{},...o||{}}});this.enqueue("capture",n,i)}))}async getRemoteConfig(){await this._initPromise;let e=this.host;"https://us.i.posthog.com"===e?e="https://us-assets.i.posthog.com":"https://eu.i.posthog.com"===e&&(e="https://eu-assets.i.posthog.com");const t=`${e}/array/${this.apiKey}/config`,s={method:"GET",headers:{...this.getCustomHeaders(),"Content-Type":"application/json"}};return this.fetchWithRetry(t,s,{retryCount:0},this.remoteConfigRequestTimeoutMs).then((e=>e.json())).catch((e=>{this.logMsgIfDebug((()=>console.error("Remote config could not be loaded",e))),this._events.emit("error",e)}))}async getFlags(e,t={},s={},i={},r={}){await this._initPromise;const o=`${this.host}/flags/?v=2&config=true`,n={method:"POST",headers:{...this.getCustomHeaders(),"Content-Type":"application/json"},body:JSON.stringify({token:this.apiKey,distinct_id:e,groups:t,person_properties:s,group_properties:i,...r})};return this.logMsgIfDebug((()=>console.log("PostHog Debug","Flags URL",o))),this.fetchWithRetry(o,n,{retryCount:0},this.featureFlagsRequestTimeoutMs).then((e=>e.json())).then((e=>h(e))).catch((e=>{this._events.emit("error",e)}))}async getFeatureFlagStateless(e,t,s={},i={},r={},o){await this._initPromise;const n=await this.getFeatureFlagDetailStateless(e,t,s,i,r,o);if(void 0===n)return{response:void 0,requestId:void 0};let a=m(n.response);return void 0===a&&(a=!1),{response:a,requestId:n.requestId}}async getFeatureFlagDetailStateless(e,t,s={},i={},r={},o){await this._initPromise;const n=await this.getFeatureFlagDetailsStateless(t,s,i,r,o,[e]);if(void 0!==n)return{response:n.flags[e],requestId:n.requestId}}async getFeatureFlagPayloadStateless(e,t,s={},i={},r={},o){await this._initPromise;const n=await this.getFeatureFlagPayloadsStateless(t,s,i,r,o,[e]);if(!n)return;const a=n[e];return void 0===a?null:a}async getFeatureFlagPayloadsStateless(e,t={},s={},i={},r,o){return await this._initPromise,(await this.getFeatureFlagsAndPayloadsStateless(e,t,s,i,r,o)).payloads}async getFeatureFlagsStateless(e,t={},s={},i={},r,o){return await this._initPromise,await this.getFeatureFlagsAndPayloadsStateless(e,t,s,i,r,o)}async getFeatureFlagsAndPayloadsStateless(e,t={},s={},i={},r,o){await this._initPromise;const n=await this.getFeatureFlagDetailsStateless(e,t,s,i,r,o);return n?{flags:n.featureFlags,payloads:n.featureFlagPayloads,requestId:n.requestId}:{flags:void 0,payloads:void 0,requestId:void 0}}async getFeatureFlagDetailsStateless(e,t={},s={},i={},r,o){await this._initPromise;const n={};(r??this.disableGeoip)&&(n.geoip_disable=!0),o&&(n.flag_keys_to_evaluate=o);const a=await this.getFlags(e,t,s,i,n);if(void 0!==a)return a.errorsWhileComputingFlags&&console.error("[FEATURE FLAGS] Error while computing feature flags, some flags may be missing or incorrect. Learn more at https://posthog.com/docs/feature-flags/best-practices"),a.quotaLimited?.includes(H.FeatureFlags)?(console.warn("[FEATURE FLAGS] Feature flags quota limit exceeded - feature flags unavailable. Learn more about billing limits at https://posthog.com/docs/billing/limits-alerts"),{flags:{},featureFlags:{},featureFlagPayloads:{},requestId:a?.requestId}):a}async getSurveysStateless(){if(await this._initPromise,!0===this.disableSurveys)return this.logMsgIfDebug((()=>console.log("PostHog Debug","Loading surveys is disabled."))),[];const e=`${this.host}/api/surveys/?token=${this.apiKey}`,t={method:"GET",headers:{...this.getCustomHeaders(),"Content-Type":"application/json"}},s=await this.fetchWithRetry(e,t).then((e=>{if(200!==e.status||!e.json){const t=`Surveys API could not be loaded: ${e.status}`,s=new Error(t);return this.logMsgIfDebug((()=>console.error(s))),void this._events.emit("error",new Error(t))}return e.json()})).catch((e=>{this.logMsgIfDebug((()=>console.error("Surveys API could not be loaded",e))),this._events.emit("error",e)})),i=s?.surveys;return i&&this.logMsgIfDebug((()=>console.log("PostHog Debug","Surveys fetched from API: ",JSON.stringify(i)))),i??[]}get props(){return this._props||(this._props=this.getPersistedProperty(e.Props)),this._props||{}}set props(e){this._props=e}async register(t){this.wrap((()=>{this.props={...this.props,...t},this.setPersistedProperty(e.Props,this.props)}))}async unregister(t){this.wrap((()=>{delete this.props[t],this.setPersistedProperty(e.Props,this.props)}))}enqueue(t,s,i){this.wrap((()=>{if(this.optedOut)return void this._events.emit(t,"Library is disabled. Not sending event. To re-enable, call posthog.optIn()");const r=this.prepareMessage(t,s,i),o=this.getPersistedProperty(e.Queue)||[];o.length>=this.maxQueueSize&&(o.shift(),this.logMsgIfDebug((()=>console.info("Queue is full, the oldest event is dropped.")))),o.push({message:r}),this.setPersistedProperty(e.Queue,o),this._events.emit(t,r),o.length>=this.flushAt&&this.flushBackground(),this.flushInterval&&!this._flushTimer&&(this._flushTimer=v((()=>this.flushBackground()),this.flushInterval))}))}async sendImmediate(e,t,s){if(this.disabled)return void this.logMsgIfDebug((()=>console.warn("[PostHog] The client is disabled")));if(this._isInitialized||await this._initPromise,this.optedOut)return void this._events.emit(e,"Library is disabled. Not sending event. To re-enable, call posthog.optIn()");const i={api_key:this.apiKey,batch:[this.prepareMessage(e,t,s)],sent_at:F()};this.historicalMigration&&(i.historical_migration=!0);const r=JSON.stringify(i),o=`${this.host}/batch/`,n=this.disableCompression?null:await S(r,this.isDebug),a={method:"POST",headers:{...this.getCustomHeaders(),"Content-Type":"application/json",...null!==n&&{"Content-Encoding":"gzip"}},body:n||r};try{await this.fetchWithRetry(o,a)}catch(e){this._events.emit("error",e)}}prepareMessage(e,t,s){const i={...t,type:e,library:this.getLibraryId(),library_version:this.getLibraryVersion(),timestamp:s?.timestamp?s?.timestamp:F(),uuid:s?.uuid?s.uuid:O()};return(s?.disableGeoip??this.disableGeoip)&&(i.properties||(i.properties={}),i.properties.$geoip_disable=!0),i.distinctId&&(i.distinct_id=i.distinctId,delete i.distinctId),i}clearFlushTimer(){this._flushTimer&&(clearTimeout(this._flushTimer),this._flushTimer=void 0)}flushBackground(){this.flush().catch((async e=>{await j(e)}))}async flush(){const e=_([this.flushPromise]).then((()=>this._flush()));return this.flushPromise=e,this.addPendingPromise(e),_([e]).then((()=>{this.flushPromise===e&&(this.flushPromise=null)})),e}getCustomHeaders(){const e=this.getCustomUserAgent(),t={};return e&&""!==e&&(t["User-Agent"]=e),t}async _flush(){this.clearFlushTimer(),await this._initPromise;let t=this.getPersistedProperty(e.Queue)||[];if(!t.length)return;const s=[],i=t.length;for(;t.length>0&&s.length<i;){const i=t.slice(0,this.maxBatchSize),r=i.map((e=>e.message)),o=()=>{const s=(this.getPersistedProperty(e.Queue)||[]).slice(i.length);this.setPersistedProperty(e.Queue,s),t=s},n={api_key:this.apiKey,batch:r,sent_at:F()};this.historicalMigration&&(n.historical_migration=!0);const a=JSON.stringify(n),l=`${this.host}/batch/`,u=this.disableCompression?null:await S(a,this.isDebug),c={method:"POST",headers:{...this.getCustomHeaders(),"Content-Type":"application/json",...null!==u&&{"Content-Encoding":"gzip"}},body:u||a},g={retryCheck:e=>!z(e)&&q(e)};try{await this.fetchWithRetry(l,c,g)}catch(e){if(z(e)&&r.length>1){this.maxBatchSize=Math.max(1,Math.floor(r.length/2)),this.logMsgIfDebug((()=>console.warn(`Received 413 when sending batch of size ${r.length}, reducing batch size to ${this.maxBatchSize}`)));continue}throw e instanceof T||o(),this._events.emit("error",e),e}o(),s.push(...r)}this._events.emit("flush",s)}async fetchWithRetry(e,t,s,i){var r;(r=AbortSignal).timeout??(r.timeout=function(e){const t=new AbortController;return setTimeout((()=>t.abort()),e),t.signal});const o=t.body?t.body:"";let n=-1;try{n=o instanceof Blob?o.size:Buffer.byteLength(o,"utf8")}catch{if(o instanceof Blob)n=o.size;else{const e=(new TextEncoder).encode(o);n=e.length}}return await async function(e,t){let s=null;for(let i=0;i<t.retryCount+1;i++){i>0&&await new Promise((e=>setTimeout(e,t.retryDelay)));try{return await e()}catch(e){if(s=e,!t.retryCheck(e))throw e}}throw s}((async()=>{let s=null;try{s=await this.fetch(e,{signal:AbortSignal.timeout(i??this.requestTimeout),...t})}catch(e){throw new T(e)}if("no-cors"!==t.mode&&(s.status<200||s.status>=400))throw new M(s,n);return s}),{...this._retryOptions,...s})}async _shutdown(t=3e4){await this._initPromise;let s=!1;return this.clearFlushTimer(),Promise.race([new Promise(((e,i)=>{v((()=>{this.logMsgIfDebug((()=>console.error("Timed out while shutting down PostHog"))),s=!0,i("Timeout while shutting down PostHog. Some events may not have been sent.")}),t)})),(async()=>{try{for(await Promise.all(Object.values(this.pendingPromises));0!==(this.getPersistedProperty(e.Queue)||[]).length&&(await this.flush(),!s););}catch(e){if(!q(e))throw e;await j(e)}})()])}async shutdown(e=3e4){return this.shutdownPromise?this.logMsgIfDebug((()=>console.warn("shutdown() called while already shutting down. shutdown() is meant to be called once before process exit - use flush() for per-request cleanup"))):this.shutdownPromise=this._shutdown(e).finally((()=>{this.shutdownPromise=null})),this.shutdownPromise}}class N extends L{constructor(e,t){const s=t?.disableGeoip??!1,i=t?.featureFlagsRequestTimeoutMs??1e4;super(e,{...t,disableGeoip:s,featureFlagsRequestTimeoutMs:i}),this.flagCallReported={},this._sessionMaxLengthSeconds=86400,this.sessionProps={},this.sendFeatureFlagEvent=t?.sendFeatureFlagEvent??!0,this._sessionExpirationTimeSeconds=t?.sessionExpirationTimeSeconds??1800}setupBootstrap(t){const s=t?.bootstrap;if(!s)return;s.distinctId&&(s.isIdentifiedId?this.getPersistedProperty(e.DistinctId)||this.setPersistedProperty(e.DistinctId,s.distinctId):this.getPersistedProperty(e.AnonymousId)||this.setPersistedProperty(e.AnonymousId,s.distinctId));const i=s.featureFlags,r=s.featureFlagPayloads??{};if(i&&Object.keys(i).length){const e=P(i,r);if(Object.keys(e.flags).length>0){this.setBootstrappedFeatureFlagDetails(e);const t=this.getKnownFeatureFlagDetails()||{flags:{},requestId:void 0},s={flags:{...e.flags,...t.flags},requestId:e.requestId};this.setKnownFeatureFlagDetails(s)}}}clearProps(){this.props=void 0,this.sessionProps={},this.flagCallReported={}}on(e,t){return this._events.on(e,t)}reset(t){this.wrap((()=>{const s=[e.Queue,...t||[]];this.clearProps();for(const t of Object.keys(e))s.includes(e[t])||this.setPersistedProperty(e[t],null);this.reloadFeatureFlags()}))}getCommonEventProperties(){const e=this.getFeatureFlags(),t={};if(e)for(const[s,i]of Object.entries(e))t[`$feature/${s}`]=i;return{...R("$active_feature_flags",e?Object.keys(e):void 0),...t,...super.getCommonEventProperties()}}enrichProperties(e){return{...this.props,...this.sessionProps,...e||{},...this.getCommonEventProperties(),$session_id:this.getSessionId()}}getSessionId(){if(!this._isInitialized)return"";let t=this.getPersistedProperty(e.SessionId);const s=this.getPersistedProperty(e.SessionLastTimestamp)||0,i=this.getPersistedProperty(e.SessionStartTimestamp)||0,r=Date.now(),o=r-i;return(!t||r-s>1e3*this._sessionExpirationTimeSeconds||o>1e3*this._sessionMaxLengthSeconds)&&(t=O(),this.setPersistedProperty(e.SessionId,t),this.setPersistedProperty(e.SessionStartTimestamp,r)),this.setPersistedProperty(e.SessionLastTimestamp,r),t}resetSessionId(){this.wrap((()=>{this.setPersistedProperty(e.SessionId,null),this.setPersistedProperty(e.SessionLastTimestamp,null),this.setPersistedProperty(e.SessionStartTimestamp,null)}))}getAnonymousId(){if(!this._isInitialized)return"";let t=this.getPersistedProperty(e.AnonymousId);return t||(t=O(),this.setPersistedProperty(e.AnonymousId,t)),t}getDistinctId(){return this._isInitialized?this.getPersistedProperty(e.DistinctId)||this.getAnonymousId():""}registerForSession(e){this.sessionProps={...this.sessionProps,...e}}unregisterForSession(e){delete this.sessionProps[e]}identify(t,s,i){this.wrap((()=>{const r=this.getDistinctId();t=t||r,s?.$groups&&this.groups(s.$groups);const o=s?.$set_once;delete s?.$set_once;const n=s?.$set||s,a=this.enrichProperties({$anon_distinct_id:this.getAnonymousId(),...R("$set",n),...R("$set_once",o)});t!==r&&(this.setPersistedProperty(e.AnonymousId,r),this.setPersistedProperty(e.DistinctId,t),this.reloadFeatureFlags()),super.identifyStateless(t,a,i)}))}capture(e,t,s){this.wrap((()=>{const i=this.getDistinctId();t?.$groups&&this.groups(t.$groups);const r=this.enrichProperties(t);super.captureStateless(i,e,r,s)}))}alias(e){this.wrap((()=>{const t=this.getDistinctId(),s=this.enrichProperties({});super.aliasStateless(e,t,s)}))}autocapture(e,t,s={},i){this.wrap((()=>{const r={distinct_id:this.getDistinctId(),event:"$autocapture",properties:{...this.enrichProperties(s),$event_type:e,$elements:t}};this.enqueue("autocapture",r,i)}))}groups(e){this.wrap((()=>{const t=this.props.$groups||{};this.register({$groups:{...t,...e}}),Object.keys(e).find((s=>t[s]!==e[s]))&&this.reloadFeatureFlags()}))}group(e,t,s,i){this.wrap((()=>{this.groups({[e]:t}),s&&this.groupIdentify(e,t,s,i)}))}groupIdentify(e,t,s,i){this.wrap((()=>{const r=this.getDistinctId(),o=this.enrichProperties({});super.groupIdentifyStateless(e,t,s,i,r,o)}))}setPersonPropertiesForFlags(t){this.wrap((()=>{const s=this.getPersistedProperty(e.PersonProperties)||{};this.setPersistedProperty(e.PersonProperties,{...s,...t})}))}resetPersonPropertiesForFlags(){this.wrap((()=>{this.setPersistedProperty(e.PersonProperties,null)}))}setGroupPropertiesForFlags(t){this.wrap((()=>{const s=this.getPersistedProperty(e.GroupProperties)||{};0!==Object.keys(s).length&&Object.keys(s).forEach((e=>{s[e]={...s[e],...t[e]},delete t[e]})),this.setPersistedProperty(e.GroupProperties,{...s,...t})}))}resetGroupPropertiesForFlags(){this.wrap((()=>{this.setPersistedProperty(e.GroupProperties,null)}))}async remoteConfigAsync(){return await this._initPromise,this._remoteConfigResponsePromise?this._remoteConfigResponsePromise:this._remoteConfigAsync()}async flagsAsync(e=!0){return await this._initPromise,this._flagsResponsePromise?this._flagsResponsePromise:this._flagsAsync(e)}cacheSessionReplay(t,s){const i=s?.sessionRecording;i?(this.setPersistedProperty(e.SessionReplay,i),this.logMsgIfDebug((()=>console.log("PostHog Debug",`Session replay config from ${t}: `,JSON.stringify(i))))):"boolean"==typeof i&&!1===i&&(this.logMsgIfDebug((()=>console.info("PostHog Debug",`Session replay config from ${t} disabled.`))),this.setPersistedProperty(e.SessionReplay,null))}async _remoteConfigAsync(){return this._remoteConfigResponsePromise=this._initPromise.then((()=>{let s=this.getPersistedProperty(e.RemoteConfig);return this.logMsgIfDebug((()=>console.log("PostHog Debug","Cached remote config: ",JSON.stringify(s)))),super.getRemoteConfig().then((i=>{if(i){const r={...i};if(delete r.surveys,this.logMsgIfDebug((()=>console.log("PostHog Debug","Fetched remote config: ",JSON.stringify(r)))),!1===this.disableSurveys){const t=i.surveys;let s=!0;Array.isArray(t)?this.logMsgIfDebug((()=>console.log("PostHog Debug","Surveys fetched from remote config: ",JSON.stringify(t)))):(this.logMsgIfDebug((()=>console.log("PostHog Debug","There are no surveys."))),s=!1),s?this.setPersistedProperty(e.Surveys,t):this.setPersistedProperty(e.Surveys,null)}else this.setPersistedProperty(e.Surveys,null);this.setPersistedProperty(e.RemoteConfig,r),this.cacheSessionReplay("remote config",i),!1===i.hasFeatureFlags?(this.setKnownFeatureFlagDetails({flags:{}}),this.logMsgIfDebug((()=>console.warn("Remote config has no feature flags, will not load feature flags.")))):!1!==this.preloadFeatureFlags&&this.reloadFeatureFlags(),i.supportedCompression?.includes(t.GZipJS)||(this.disableCompression=!0),s=i}return s}))})).finally((()=>{this._remoteConfigResponsePromise=void 0})),this._remoteConfigResponsePromise}async _flagsAsync(t=!0){return this._flagsResponsePromise=this._initPromise.then((async()=>{const s=this.getDistinctId(),i=this.props.$groups||{},r=this.getPersistedProperty(e.PersonProperties)||{},o=this.getPersistedProperty(e.GroupProperties)||{},n={$anon_distinct_id:t?this.getAnonymousId():void 0},a=await super.getFlags(s,i,r,o,n);if(a?.quotaLimited?.includes(H.FeatureFlags))return this.setKnownFeatureFlagDetails(null),console.warn("[FEATURE FLAGS] Feature flags quota limit exceeded - unsetting all flags. Learn more about billing limits at https://posthog.com/docs/billing/limits-alerts"),a;if(a?.featureFlags){this.sendFeatureFlagEvent&&(this.flagCallReported={});let t=a;if(a.errorsWhileComputingFlags){const e=this.getKnownFeatureFlagDetails();this.logMsgIfDebug((()=>console.log("PostHog Debug","Cached feature flags: ",JSON.stringify(e)))),t={...a,flags:{...e?.flags,...a.flags}}}this.setKnownFeatureFlagDetails(t),this.setPersistedProperty(e.FlagsEndpointWasHit,!0),this.cacheSessionReplay("flags",a)}return a})).finally((()=>{this._flagsResponsePromise=void 0})),this._flagsResponsePromise}setKnownFeatureFlagDetails(t){this.wrap((()=>{this.setPersistedProperty(e.FeatureFlagDetails,t),this._events.emit("featureflags",p(t?.flags??{}))}))}getKnownFeatureFlagDetails(){const t=this.getPersistedProperty(e.FeatureFlagDetails);if(!t){const t=this.getPersistedProperty(e.FeatureFlags),s=this.getPersistedProperty(e.FeatureFlagPayloads);if(void 0===t&&void 0===s)return;return P(t??{},s??{})}return h(t)}getKnownFeatureFlags(){const e=this.getKnownFeatureFlagDetails();if(e)return p(e.flags)}getKnownFeatureFlagPayloads(){const e=this.getKnownFeatureFlagDetails();if(e)return f(e.flags)}getBootstrappedFeatureFlagDetails(){const t=this.getPersistedProperty(e.BootstrapFeatureFlagDetails);if(t)return t}setBootstrappedFeatureFlagDetails(t){this.setPersistedProperty(e.BootstrapFeatureFlagDetails,t)}getBootstrappedFeatureFlags(){const e=this.getBootstrappedFeatureFlagDetails();if(e)return p(e.flags)}getBootstrappedFeatureFlagPayloads(){const e=this.getBootstrappedFeatureFlagDetails();if(e)return f(e.flags)}getFeatureFlag(t){const s=this.getFeatureFlagDetails();if(!s)return;const i=s.flags[t];let r=m(i);if(void 0===r&&(r=!1),this.sendFeatureFlagEvent&&!this.flagCallReported[t]){const o=this.getBootstrappedFeatureFlags()?.[t],n=this.getBootstrappedFeatureFlagPayloads()?.[t];this.flagCallReported[t]=!0,this.capture("$feature_flag_called",{$feature_flag:t,$feature_flag_response:r,...R("$feature_flag_id",i?.metadata?.id),...R("$feature_flag_version",i?.metadata?.version),...R("$feature_flag_reason",i?.reason?.description??i?.reason?.code),...R("$feature_flag_bootstrapped_response",o),...R("$feature_flag_bootstrapped_payload",n),$used_bootstrap_value:!this.getPersistedProperty(e.FlagsEndpointWasHit),...R("$feature_flag_request_id",s.requestId)})}return r}getFeatureFlagPayload(e){const t=this.getFeatureFlagPayloads();if(!t)return;const s=t[e];return void 0===s?null:s}getFeatureFlagPayloads(){return this.getFeatureFlagDetails()?.featureFlagPayloads}getFeatureFlags(){return this.getFeatureFlagDetails()?.featureFlags}getFeatureFlagDetails(){let t=this.getKnownFeatureFlagDetails();const s=this.getPersistedProperty(e.OverrideFeatureFlags);if(!s)return t;t=t??{featureFlags:{},featureFlagPayloads:{},flags:{}};const i=t.flags??{};for(const e in s)s[e]?i[e]=(r=i[e],o=s[e],{...r,enabled:A(o),variant:b(o)}):delete i[e];var r,o;const n={...t,flags:i};return h(n)}getFeatureFlagsAndPayloads(){return{flags:this.getFeatureFlags(),payloads:this.getFeatureFlagPayloads()}}isFeatureEnabled(e){const t=this.getFeatureFlag(e);if(void 0!==t)return!!t}reloadFeatureFlags(e){this.flagsAsync(!0).then((t=>{e?.cb?.(void 0,t?.featureFlags)})).catch((t=>{e?.cb?.(t,void 0),e?.cb||this.logMsgIfDebug((()=>console.log("PostHog Debug","Error reloading feature flags",t)))}))}async reloadRemoteConfigAsync(){return await this.remoteConfigAsync()}async reloadFeatureFlagsAsync(e){return(await this.flagsAsync(e??!0))?.featureFlags}onFeatureFlags(e){return this.on("featureflags",(async()=>{const t=this.getFeatureFlags();t&&e(t)}))}onFeatureFlag(e,t){return this.on("featureflags",(async()=>{const s=this.getFeatureFlag(e);void 0!==s&&t(s)}))}async overrideFeatureFlag(t){this.wrap((()=>null===t?this.setPersistedProperty(e.OverrideFeatureFlags,null):this.setPersistedProperty(e.OverrideFeatureFlags,t)))}captureException(e,t){const s={$exception_level:"error",$exception_list:[{type:w(e)?e.name:"Error",value:w(e)?e.message:e,mechanism:{handled:!0,synthetic:!1}}],...t};s.$exception_personURL=new URL(`/project/${this.apiKey}/person/${this.getDistinctId()}`,this.host).toString(),this.capture("$exception",s)}captureTraceFeedback(e,t){this.capture("$ai_feedback",{$ai_feedback_text:t,$ai_trace_id:String(e)})}captureTraceMetric(e,t,s){this.capture("$ai_metric",{$ai_metric_name:t,$ai_metric_value:String(s),$ai_trace_id:String(e)})}}function V(e){let t={};if(e?.navigator){const s=e.navigator.userAgent,i=function(e){if(!e?.navigator)return;const t=e.navigator.userAgent;return/Windows/i.test(t)?/Phone/.test(t)||/WPDesktop/.test(t)?"Windows Phone":"Windows":/(iPhone|iPad|iPod)/.test(t)?"iOS":/Android/.test(t)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(t)?"BlackBerry":/Mac/i.test(t)?"Mac OS X":/Linux/.test(t)?"Linux":/CrOS/.test(t)?"Chrome OS":void 0}(e);t={...t,...void 0!==i&&{$os:i},$browser:K(s,e.navigator.vendor,!!e.opera),$referrer:e.document.referrer,$referring_domain:W(e.document.referrer),$device:U(s),$current_url:e.location.href,$host:e.location.host,$pathname:e.location.pathname,$browser_version:Q(s,e.navigator.vendor,!!e.opera),$screen_height:e.screen.height,$screen_width:e.screen.width,$screen_dpr:e.devicePixelRatio}}return t={...t,$lib:"js",$lib_version:g,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:(new Date).getTime()/1e3},t}function G(e,t){return e.indexOf(t)>=0}function K(e,t,s){return t=t||"",s||G(e," OPR/")?G(e,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":G(e,"IEMobile")||G(e,"WPDesktop")?"Internet Explorer Mobile":G(e,"SamsungBrowser/")?"Samsung Internet":G(e,"Edge")||G(e,"Edg/")?"Microsoft Edge":G(e,"FBIOS")?"Facebook Mobile":G(e,"Chrome")?"Chrome":G(e,"CriOS")?"Chrome iOS":G(e,"UCWEB")||G(e,"UCBrowser")?"UC Browser":G(e,"FxiOS")?"Firefox iOS":G(t,"Apple")?G(e,"Mobile")?"Mobile Safari":"Safari":G(e,"Android")?"Android Mobile":G(e,"Konqueror")?"Konqueror":G(e,"Firefox")?"Firefox":G(e,"MSIE")||G(e,"Trident/")?"Internet Explorer":G(e,"Gecko")?"Mozilla":""}function Q(e,t,s){const i={"Internet Explorer Mobile":/rv:(\d+(\.\d+)?)/,"Microsoft Edge":/Edge?\/(\d+(\.\d+)?)/,Chrome:/Chrome\/(\d+(\.\d+)?)/,"Chrome iOS":/CriOS\/(\d+(\.\d+)?)/,"UC Browser":/(UCBrowser|UCWEB)\/(\d+(\.\d+)?)/,Safari:/Version\/(\d+(\.\d+)?)/,"Mobile Safari":/Version\/(\d+(\.\d+)?)/,Opera:/(Opera|OPR)\/(\d+(\.\d+)?)/,Firefox:/Firefox\/(\d+(\.\d+)?)/,"Firefox iOS":/FxiOS\/(\d+(\.\d+)?)/,Konqueror:/Konqueror:(\d+(\.\d+)?)/,BlackBerry:/BlackBerry (\d+(\.\d+)?)/,"Android Mobile":/android\s(\d+(\.\d+)?)/,"Samsung Internet":/SamsungBrowser\/(\d+(\.\d+)?)/,"Internet Explorer":/(rv:|MSIE )(\d+(\.\d+)?)/,Mozilla:/rv:(\d+(\.\d+)?)/}[K(e,t,s)]||void 0;if(void 0===i)return null;const r=e.match(i);return r?parseFloat(r[r.length-2]):null}function U(e){return/Windows Phone/i.test(e)||/WPDesktop/.test(e)?"Windows Phone":/iPad/.test(e)?"iPad":/iPod/.test(e)?"iPod Touch":/iPhone/.test(e)?"iPhone":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":/Android/.test(e)?"Android":""}function W(e){const t=e.split("/");return t.length>=3?t[2]:""}const $={getItem(e){try{const t=e+"=",s=document.cookie.split(";");for(let e=0;e<s.length;e++){let i=s[e];for(;" "==i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return decodeURIComponent(i.substring(t.length,i.length))}}catch(e){}return null},setItem(e,t){try{const s="",i="",r="",o=e+"="+encodeURIComponent(t)+i+"; path=/"+s+r;document.cookie=o}catch(e){return}},removeItem(e){try{$.setItem(e,"")}catch(e){return}},clear(){document.cookie=""},getAllKeys(){const e=document.cookie.split(";"),t=[];for(let s=0;s<e.length;s++){let i=e[s];for(;" "==i.charAt(0);)i=i.substring(1,i.length);t.push(i.split("=")[0])}return t}},J=e=>({getItem:t=>e.getItem(t),setItem(t,s){e.setItem(t,s)},removeItem(t){e.removeItem(t)},clear(){e.clear()},getAllKeys(){const e=[];for(const t in localStorage)e.push(t);return e}}),Y=(e,t="__mplssupport__")=>{try{const s="xyz";return e.setItem(t,s),e.getItem(t)===s&&(e.removeItem(t),!0)}catch(e){return!1}};let X,Z;const ee=()=>{const e={};return{getItem:t=>e[t],setItem(t,s){e[t]=null!==s?s:void 0},removeItem(t){delete e[t]},clear(){for(const t in e)delete e[t]},getAllKeys(){const t=[];for(const s in e)t.push(s);return t}}};function te(e,t,s){try{if(!(t in e))return()=>{};const i=e[t],r=s(i);return"function"==typeof r&&(r.prototype=r.prototype||{},Object.defineProperties(r,{__posthog_wrapped__:{enumerable:!1,value:!0}})),e[t]=r,()=>{e[t]=i}}catch{return()=>{}}}class se extends N{constructor(e,t){super(e,t),this._lastPathname="",this._storageKey=t?.persistence_name?`ph_${t.persistence_name}`:`ph_${e}_posthog`,this._storage=((e,t)=>{if(t){if(!X){const e=J(t.localStorage);X=Y(e)?e:void 0}if(!Z){const e=J(t.sessionStorage);Z=Y(e)?e:void 0}}switch(e){case"cookie":return $||X||Z||ee();case"localStorage":return X||Z||ee();case"sessionStorage":return Z||ee();default:return ee()}})(t?.persistence||"localStorage",this.getWindow()),this.setupBootstrap(t),!1!==t?.preloadFeatureFlags&&this.reloadFeatureFlags(),t?.captureHistoryEvents&&"undefined"!=typeof window&&(this._lastPathname=window?.location?.pathname||"",this.setupHistoryEventTracking())}getWindow(){return"undefined"!=typeof window?window:void 0}getPersistedProperty(e){return this._storageCache||(this._storageCache=JSON.parse(this._storage.getItem(this._storageKey)||"{}")||{}),this._storageCache[e]}setPersistedProperty(e,t){this._storageCache||(this._storageCache=JSON.parse(this._storage.getItem(this._storageKey)||"{}")||{}),null===t?delete this._storageCache[e]:this._storageCache[e]=t,this._storage.setItem(this._storageKey,JSON.stringify(this._storageCache))}fetch(e,t){const s="undefined"!=typeof fetch?fetch:void 0!==globalThis.fetch?globalThis.fetch:void 0;return s?s(e,t):Promise.reject(new Error("Fetch API is not available in this environment."))}getLibraryId(){return"posthog-js-lite"}getLibraryVersion(){return g}getCustomUserAgent(){}getCommonEventProperties(){return{...super.getCommonEventProperties(),...V(this.getWindow())}}setupHistoryEventTracking(){const e=this.getWindow();if(!e)return;const t=this;te(e.history,"pushState",(e=>function(s,i,r){e.call(this,s,i,r),t.captureNavigationEvent("pushState")})),te(e.history,"replaceState",(e=>function(s,i,r){e.call(this,s,i,r),t.captureNavigationEvent("replaceState")})),e.addEventListener("popstate",(()=>{this.captureNavigationEvent("popstate")}))}captureNavigationEvent(e){const t=this.getWindow();if(!t)return;const s=t.location.pathname;s!==this._lastPathname&&(this.capture("$pageview",{navigation_type:e}),this._lastPathname=s)}}let ie=null;function re(){return!chrome.runtime.getManifest().update_url}function oe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{if(ie){const s=function(e){const t={...e};return["apiKey","password","token","secret","private"].forEach((e=>{t[e]&&delete t[e]})),t}(t);ie.capture(e,s),console.debug("[Sokuji] [Popup] Event tracked:",e,s)}}catch(e){console.error("[Sokuji] [Popup] Error tracking event:",e)}}const ne=["meet.google.com","teams.live.com","teams.microsoft.com","app.zoom.us", "app.gather.town","whereby.com","discord.com","app.slack.com"],ae={"meet.google.com":{name:"Google Meet",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACB0lEQVR4AWPAB0bBKHjlYmzzfRXPkT97mO+TjHcz3/69m6X//34GDrItf+Vs9vnHMt6Xv/ew/CcXAx0TT7blr5xN/39fwP+TQgfMJ9tysAPmCfynlgO0V4XymKwIWm6yIvi8yfIQB/yWIxzwlxoOMF8SJAO0+DQQ/wdh4xXB8/FZjnDAUr63lDrAaEWQBdDS51DLMR2wNTLf9axf2NdzfiH/0fGXFUKniUn1uBywb5PkWqCFv0GW4nSAU+vXeqfWL/+x4pbPocSkHXSLf+1h+dM9X/aVymSXSyAL6eqAz7vY/oRP0Pwv0WDxX3miyzO6OuD+Vq5f1p0GIMshDpjg9ItuDji3gf+9VqsJyGI4Vup3+k8XB+xZLXRDptEcZjH9HaAx3eMS0MKBcwDIUO3ZXs8lGwfQASCsO9/3i2SzJcIBE5z+0M0BMGy4JOCbTJsNNBc4v6anAxAWLAv8KNdt91llkst1gg6Qy75RrpBz/T8mvvHDYFbBNqCG/URgbHH9W3eB30aCDpBIu1wvmX7pPzasPyfrFUgD6RhhkcnKoHqyHaA3s/AP6RZjWmS6PCgcyP9OsgN0ZxSTaTmmRcarQm2QquXJdAwBBLBYHqAAihIQjeSAi/G4HGAwJ/sNJQ4wWR6cTTALKSTc5wBathqIf6M7wHBB0i0yLf8NxOsN1gcI4LN7FIwCACcjGypcbDtgAAAAAElFTkSuQmCC"},"teams.live.com":{name:"Microsoft Teams Live",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACD0lEQVR4Ae2XA2wlURiF7zq2VuEiztq2rdq27bWNeG3bCNa2VT/V7vy9fzmeaR/Kk5yH0fnm+pJWq7i1+vExq7WXYlZr0tH4G49ZJJyGRVMzMSkaYDs2RVuJ58z+5hjEDuZDmLUksKj5oXzjNYSlJbYv5i6yevZ8sdXTfPzG/0YAaNKVATTp3PCnwDcetwgAvrEYAB5vEoBv6Jsb/mHvge2QmJ+SVYDFLgaAxwlq3rI7a+cuu1s2d+kdaJxvw+yFh8HG8RxCCBuh2hJQDFeAmLNwGwIIu6HaNqAYouBFyw/o/MPfZ4oPRMq9QACgIAEAMVICgLKyynrXiXVMADBqrA+ssjsh2huikrLBxfcLiDfCZ6VLrJ6tla2C8vJKYBiGf1wRgAeBgZIQ5gZAY5ikOwA6ADoAjBmKjQewfmYwdjIyBgAHoutGTcdTZu6hAL6yABGJmZKj4CLr5yOIGo2dGJSKbyq0H0yfs1YWIDDyPyMIt35WucTqqStRKxuXC0cxRMq2zhekSyAh8zB928N0Gv5Xbeunh5bbPh9IGiO/yI+DXbzuMc6ed0BgrzvgF/ZOYomuKY5ZretLTCH6sGRegKLjVus2EVMJADrFpmjPqg2PXa05ceAAdCOm1M6d0CN2jS4hZrWmRGZnVEpLa2siQGdiLsVuzO0ft1q7hgY9ooG51H+pn1CvT9yg6UVak6oAILzSjyQsMWUAAAAASUVORK5CYII="},"teams.microsoft.com":{name:"Microsoft Teams Enterprise",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACD0lEQVR4Ae2XA2wlURiF7zq2VuEiztq2rdq27bWNeG3bCNa2VT/V7vy9fzmeaR/Kk5yH0fnm+pJWq7i1+vExq7WXYlZr0tH4G49ZJJyGRVMzMSkaYDs2RVuJ58z+5hjEDuZDmLUksKj5oXzjNYSlJbYv5i6yevZ8sdXTfPzG/0YAaNKVATTp3PCnwDcetwgAvrEYAB5vEoBv6Jsb/mHvge2QmJ+SVYDFLgaAxwlq3rI7a+cuu1s2d+kdaJxvw+yFh8HG8RxCCBuh2hJQDFeAmLNwGwIIu6HaNqAYouBFyw/o/MPfZ4oPRMq9QACgIAEAMVICgLKyynrXiXVMADBqrA+ssjsh2huikrLBxfcLiDfCZ6VLrJ6tla2C8vJKYBiGf1wRgAeBgZIQ5gZAY5ikOwA6ADoAjBmKjQewfmYwdjIyBgAHoutGTcdTZu6hAL6yABGJmZKj4CLr5yOIGo2dGJSKbyq0H0yfs1YWIDDyPyMIt35WucTqqStRKxuXC0cxRMq2zhekSyAh8zB928N0Gv5Xbeunh5bbPh9IGiO/yI+DXbzuMc6ed0BgrzvgF/ZOYomuKY5ZretLTCH6sGRegKLjVus2EVMJADrFpmjPqg2PXa05ceAAdCOm1M6d0CN2jS4hZrWmRGZnVEpLa2siQGdiLsVuzO0ft1q7hgY9ooG51H+pn1CvT9yg6UVak6oAILzSjyQsMWUAAAAASUVORK5CYII="},"app.zoom.us":{name:"Zoom",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAFrklEQVR4AaWXA5QjSxSG/6pgmGcsn23btm2tbdu2bdu2bdsaxUlV3VdzOpNNz3Q2iz7nOzcp/X/futVJcyS4ni1Jjsdr+d94ura/wTN1vWNfqO9d/WJDz6lXGrszXmvqlm82z5Fvt8zOeK919skP22at/qR95tjPOmbW/6Jz5htvNSY7ElxxDTxYk1z3Vww2cKcGDwvBloQkmgrJvg9L9qKOhTQ36nYeIfdz4bBgL4YF/17HZkJgSfp1WYe1kfrf9zibfkUGipQSn/s8YmdYsaZCsSJaDEIYhGOj1FEjJI9Elj8WFQLNAkHHzi86ZXx6WQZu/VdWEgqTtUixgmIJRE0mucZo1xSXik37otOFxpc04PqDaocE66wn8rBMLBoVy0OayG+QhSVv9FnHrBqWBlJ/Fp8rqVrEFRUWSM2VZUVHtP6oQ8YnJgO3/EMuxmRPkOIgCaVgKZYwKxZ1YmGKK8F7v6ULM2rA5/NVBsliGuRBpCAV4oteuig1zBpjbHF7jrOSYeAtsoNkKS0YEVcwGVEqMpFbi1kTNyvRG1C87LN9yMGTb816FSSLakARYGFGGUYsSZwVywIuknLO/SLnTLwBkiZBin4vaEYqxNxZVNSy8qXKJ5q/mEPsTc6Uejz2Tht878T2LqnY1iUF2zonaZzY1smhsWFLe44KHxFIGfXhdDC0/JnjYHcbjvW0YUoNG567x4bHinOMrODAzvZObGqVhKbfOZDqMETNBtnjnJS8M3qHkBi5JAAhCXffxiOwKPcWYqj2OQNIwsYUJlcHSr4HpCUBQgHP3sMwuhLHuCo2vHgfg1JAkgP49kUbhpR1AjBvRUjwOzlg7H8eB06F8FSlTBT+KwNF/8nSZOP3zn49CQCAXnMEQBI/vEx46QFgz0ng4UqEQv8BXWYCTjuQ7ACGLCHcV0ni2doCW48SHirC8P1LdlN9SMmKcpB0aQoUXY5XIMsj8PTdHH3LJsNhAzpODaL1xCBAEi/cZxjqOVvg2HmpF5RoMo6iRpuOB7wBhpMZDD3nEADgqTsLFK+LE8lUImVZdK89bMOYmulIcTJ0nR5AgxH+6DPCaTcWzfYqAMb4kFb3Bw0DGe6LQhkeBgB6ToFnRRrPEzabkFrcjol1b9D7q8Wn+VBnqNvUf/Eiy3alVEyxRUYSChxVzkj5oiYMtLgTE+vdbIhP9aDOkGyLZ0PeqgqUS2wbEB2nIsfWMFXgSHq5nuiOXfSFBxyY3PA2pCUzDJjrRpvx2bghjXBDKsGVHCtOJiEY5mPaZQyUlytTDYSIuTlInYgd/Pf7Lr3nhuN/P3DhxNCiODGkiKYQTg8rhFXtbkKhGygqdOC0MGXm4BkdAVPboTO55qAh02NdhnGCg8SR2MFD5mZiy8EADp0O64l5iCiuFIbvXknCyQsS9Ye7sXF/0FTA5fr4sGpPdDsNU9pk1SECR89R/sf6EU5KbgMuZmD1Lg9ernwQj5bcr8mNh/BoqcN4tPRRzTE8VuYEuk/LRvPRWeg0KafA8d18MIT3GuZASqMtrz76zQ2j9rCQabyQfBsH1FJY/xJatlEuicZbtJFFnw1iMQ/4vSuI5PF4Pz6A9eIU4RrMH3OfsK/hWPy2AIk+RqriLaCs2yBBCcbHN696YzETHAACjqSOIHk4TqoSLmppHpc0c9QnvV0v/imd9pyPIMuDpLrWfaa446NRMZKlMO42j+lfcXDOGzOYEnWudZ+RwDwjVcs77ubZlu8F/nlvtSVSlXNdmlNsgARmEpgnkGjiHX97+0u+GQXnvdlFT/wcJI9ZHqUrLDoyOMJIfOKbWDz+m5HZxDszA2F6BErWB6nj8Y9SQjPHiEQ9v8/9qHfS3bOv6O1YH09PYP7bLQIhdTdT8nWQbAClxkLJ1ZoTRDJTI0FKIzM1JzSrQGosETXQ8XV/zql7AlMebIm5T3oR5/ofW/oZFougXt8AAAAASUVORK5CYII="},"app.gather.town":{name:"Gather Town",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAMAAABF0y+mAAAATlBMVEVHcExDWNhDWNhDWNhDWNhDWNhDWNhDWNhDWNhDWNhDWNgvSdY+VNjw8vx8iOI3T9e6wO8mQ9X///9mdt7Y2/aRmuakrOpSZNsKM9PN0fPNVdxhAAAAC3RSTlMAOobD6f+HYvIY4+LiGjgAAAEfSURBVHgBbJJVAgMhDAXXUgsQeEh273/QWqh3PhkgOjwZp3khWubdOHyzP9CTw/5DHU/0wen49iMRsfvQ44fz4a890hWJPn1a+9niMWJOQiSpBzjd8ySTxQNROAI9wC3nQ5fIKQSpyA1iFVk2V1wAs2qKZRWo6zntHrKlDYiKzXu2s2mYuxQOIEXOW6TOPCwWMVSpWBMCJ2YylsHcBg/xHj4FoDzsXTqFrL5xq8JoiiYm7VtFZjSmIA66lij929maB3iuALSgIFspcy+FNTOjrmVLLWZ5lDKS4egmt5JEExmjtc/07dtcAf9onzXekFyVEdhbtnsb2fOtc/TM9vQatmHtsMb3NRo/bL1MDCiHlogQZvOD5fAlTcKJGm92AABfuxfNfG+19AAAAABJRU5ErkJggg=="},"whereby.com":{name:"Whereby",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAMAAABF0y+mAAAAulBMVEX429X53Nb12NLv0szt0Mrqzcfx0s39493y1c/94dv//fb/9/D///z////56+bt1s+DcG2lkIx7aWZ0YmCfioZpWlYAAAD/6uTZ0M5DNTM+ODaPg4BmX13NuraflJEkJSUTDQy2qabk4N6onJjy4NlFQD+opaT/+fddWVeYl5d2c3O3op6CfHoyMDDw5ePax8NKPDrg1NBYTUovJCGtr62/v7r75+EYHBzJzMwoGxcZFRbFsq2Ufnra2tqLdargAAABL0lEQVR4AcSPBZYCMRBEo/gIVsC44+52/2PhhHl7ga14fiv5P9G3XlfCWB4xLl6SgjLGC8WiKFHFypVKtVJ7SBO61GsG18r8S6kw6/W62Wi22ujo3R5gVYkK3bEBOK7nIwijBwsQV/mHlRItRZD1+2GAQexkQwuj/jculdUxMEmEPn0cs1l/DltBwow+sOguqy3A7siCBlfnqkupmUBW5FVgtUxIB/1cryWiA+3I1dbAJul7qSYpybm2ge2OIUDD0PZGp0R+KhXnQENL3QZwmB81SfIS0QLonrQzsBnVX7UqUb7LgNWlGq2x6L1KzYkl1zUwEzsPGOuqHJXVxqUvySFAZDDyB+42uJKS0TFN3VCOKu7SjARlu8wt/xwVLXcev4wUd3mm6H3gIGMCUQMIAHDuG3vTJfIlAAAAAElFTkSuQmCC"},"discord.com":{name:"Discord",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAMAAABF0y+mAAAASFBMVEVHcExYZPFXZPJXZPFXZPFXZPFXZPFXZPFYZPJYZfJYZPJXZfFWY/JhbfNsd/OSmvbS1fv////x8/6pr/hQXvLl5/2Bi/XAxfpYg8U1AAAADHRSTlMADzmFwOT8YtP/sloPkm6kAAABAklEQVR4AYWTBbLFIAxFcXs4lf3vFEg1X2+9JzITIZco40IqJQVnlGBRbewtoxFmziI59rCPRGhIfn5hiLKDYSkJkemZz98689IB9YlCjPMlxnBgr4ejgTebcqltqJacLFBDCQPHJZWX0gIOjHB4Lusbrgu4ciKQI3IVRALMGGaAkqgZNdQRK4U8foc0MtQw46oDbmC9pBkQomwHlBPOlOsW9lL2sK1XUknETNnKpNOl5slKm1AQfsFaxw2eF+RQBB9HwLq3PedxG3CPMyc7yufDqF6b5Q2+jfoFf5SPaH/WPXhQuCqvn5bNVqEXR1GzkST7e0wwxeyX0fSO/T/Uf65DBzQNHUMopTvLAAAAAElFTkSuQmCC"},"app.slack.com":{name:"Slack",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAD2klEQVR4Ab2VBYzjVhRFn7OMomUKlMk/1AwVUkGZubHLzK2oGChzK1ZJVFGZnLGdMgXKzLiMAXsY3bvgKvXau55Za450B/KV944/mdyQKGkh5KlEqfEHfhdaytoxbaVuzhwPqxmOqVmBlzMf8UrmJ6ZkHmBKdhF5QWtZ4xLFxneI0ZShts+79qEd8Gr2dF5OG/9PRiEvSJT1syzNzXxHIKzkpqNhH2JYMhJV7tqb9pSWUuNWWwHkyMrAVEz5UmtzM1iacz1YAv0QNBuyE2gvdk3n1cxyJwGmpgXyAmy8uyZewEJLUWtvKWk3Q+YOM8kv9MkTJOCMJwJHfNbLtVa62lqL2jXIdU7BDFzTVtYYNRGRc64FWuTcfKakz2ZqhpFJS1kPYT0/Q4wxpDP5S++U7ccw60oAl9Ot+GzAPKK8klaYnFlAKPYcYow1mI1HCYRdzABuxQ7bcSV9JwS0+rgEilrfcb8bPjd7AI1utxfIlAn3+8/jnIFfCRxauGcGGgzbN8juRwDT/YDtuJx+jVDoynEI9LVU9CNoB1jLa1FwyNLgHXMc7wU7gRHMwPGEJeASJT2For3ummsabsfjqImOdx7hsLOvwrXcj8KjEHo18f59swjYzoCSrkffuquVFXIcmSQ/656Kp1rYUmkscgpewQtxZCeTAy0f3DM1quTmkoWImpsdLmQWbctb6QU4jpPIjjUhcdaqvS+cvS37XTJlp/H9L5hqJGHtgCHFuIYcm72rdCmxmdTMyoDI/eMXD1u5IrX2nxUp47/4U1fQDjYFL5m9coXwEj4fWekXflsVTEXJQi0fPrn6Jlu75U3e2G0k9otWiIeqcpQjFBRQeBQx7ASMs170/bNC+MIy3g1p1tQ8hcIDiDGGDFY7w0lCse8Qw0kAgmfZja/E9wg01Pg0PJG75pZU3+RfIDTSHRqIBDD1j9sKIuv2vXzalnxkgX0DV0vxGZ4w9crOzYXRVUFxHwIQecJJYMNe50/XpZivKrHvxzkD99PK4PkHoNhvTYX7Me1XEnAjQECToktQ8JcxNB+tSny51smWbm8SusD3T0A8C41vXBsUVxBwK9B0BKfWJHYupvWhXaWaZ/fW8+w4XYlz5Aa3At7jUqAuhWdjD1zdlFQtH10+YQJVKbzcZncPQOT0CRKImALW1Az5uCm0p/zjFx5zEli730XTsPGWOR6zfPgoDwRE0VYA7wQCupqYiWaDdket/mbkQC+WwIeGf1oERtb6xTjtYIvEX2kVwDn/kLxilV84CC+k13Zc29/gvjgHYpw5jg3nw1Jch8a/IlUIPbslz/zkgn8BeVEBTo2yH6AAAAAASUVORK5CYII="}};function le(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return chrome.i18n.getMessage(e,t)}function ue(){const e=navigator.userAgent;return e.includes("Edg/")||e.includes("Edge/")?"edge":(e.includes("Chrome/")&&e.includes("Edg/"),"chrome")}function ce(){return"edge"===ue()?{url:"https://microsoftedge.microsoft.com/addons/detail/sokuji-aipowered-live-/dcmmcdkeibkalgdjlahlembodjhijhkm",textKey:"edgeAddons"}:{url:"https://chromewebstore.google.com/detail/ppmihnhelgfpjomhjhpecobloelicnak",textKey:"chromeWebStore"}}function ge(){const e=document.getElementById("content");oe("popup_error_state_shown",{error_type:"unable_to_detect_site"}),e.innerHTML=`\n    <div class="status-message status-unsupported">\n      <strong>${le("unableToDetect")}</strong><br>\n      ${le("refreshAndTry")}\n    </div>\n    \n    <div class="supported-sites">\n      <ul class="sites-list" id="sitesList">\n        ${he()}\n      </ul>\n      ${ne.length>3?`\n        <button class="toggle-sites-button" id="toggleSitesButton">\n          ${le("showMoreSites",[ne.length-3])}\n        </button>\n      `:""}\n    </div>\n    \n    <div class="instructions">\n      <p><strong>${le("needMoreSitesShort")}</strong> <a href="mailto:support@kizuna.ai" target="_blank">${le("contactUsShort")}</a> ${le("contributeCode")} <a href="https://github.com/kizuna-ai-lab/sokuji" target="_blank">${le("contributeCodeShort")}</a>.</p>\n    </div>\n  `}function he(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=e?ne:ne.slice(0,3),s=e?[]:ne.slice(3);let i=t.map((e=>{const t=ae[e];return`\n      <li class="site-item">\n        <img src="${t.icon}" alt="${t.name}" class="site-icon" onerror="this.style.display='none'">\n        <div class="site-info">\n          <div class="site-name">${t.name}</div>\n          <div class="site-url">${e}</div>\n        </div>\n      </li>\n    `})).join("");return!e&&s.length>0&&(i+=s.map((e=>{const t=ae[e];return`\n        <li class="site-item hidden-site">\n          <img src="${t.icon}" alt="${t.name}" class="site-icon" onerror="this.style.display='none'">\n          <div class="site-info">\n            <div class="site-name">${t.name}</div>\n            <div class="site-url">${e}</div>\n          </div>\n        </li>\n      `})).join("")),i}function de(e){document.querySelectorAll(".site-item").forEach((t=>{const s=t.cloneNode(!0);t.parentNode.replaceChild(s,t),s.addEventListener("click",(()=>{const t=s.querySelector(".site-url").textContent;oe("popup_site_navigation_clicked",{target_site:t,target_site_name:s.querySelector(".site-name").textContent,is_supported_site:e}),chrome.tabs.create({url:`https://${t}`}),window.close()}))}))}document.addEventListener("DOMContentLoaded",(async()=>{try{!function(){if(!ie&&"undefined"!=typeof window)try{ie=new se("phc_EMOuUDTntTI5SuzKQATy11qHgxVrlhJsgNFbBaWEhet",{host:"https://us.i.posthog.com",debug:re(),persistence:"localStorage",autocapture:!0,captureHistoryEvents:!1}),ie.register({app_version:chrome.runtime.getManifest().version,environment:re()?"development":"production",platform:"extension",component:"popup"}),re()&&(ie.optOut(),console.debug("[Sokuji] [Popup] PostHog initialized in development mode - capturing is opt-out by default")),console.debug("[Sokuji] [Popup] PostHog initialized")}catch(e){console.error("[Sokuji] [Popup] Error initializing PostHog:",e)}}(),function(){document.title=le("popupTitle"),document.querySelectorAll("[data-i18n]").forEach((e=>{const t=e.getAttribute("data-i18n");e.textContent=le(t)}));const e=document.getElementById("storeLink");if(e){const t=ce();e.href=t.url,e.textContent=le(t.textKey)}}(),await async function(){const[e]=await chrome.tabs.query({active:!0,currentWindow:!0});if(!e||!e.url)return ge(),void oe("popup_opened",{is_supported_site:!1,hostname:null,error_type:"no_tab_info"});const t=new URL(e.url),s=t.hostname,i=ne.some((e=>s===e||s.endsWith("."+e)));oe("popup_opened",{is_supported_site:i,hostname:s,full_url:t.origin,browser_type:ue(),supported_site_match:i?ne.find((e=>s===e||s.endsWith("."+e))):null}),i?function(e){const t=document.getElementById("content"),s=document.getElementById("openSidePanel"),i=ae[e]||{name:e,icon:""};oe("popup_supported_state_shown",{hostname:e,site_name:i.name}),t.innerHTML=`\n    <div class="status-message status-supported">\n      <strong>${le("sokujiAvailable",[i.name])}</strong><br>\n      ${le("clickToStart")}\n    </div>\n    \n    <div class="instructions">\n      <p><strong>${le("quickStart")}</strong> ${le("quickStartInstructions")}</p>\n    </div>\n  `,s.style.display="block"}(s):function(e){const t=document.getElementById("content");oe("popup_unsupported_state_shown",{hostname:e,supported_sites_count:ne.length}),t.innerHTML=`\n    <div class="status-message status-unsupported">\n      <strong>${le("notSupported")}</strong><br>\n      ${le("currentlyOn",[`<code>${e}</code>`])}\n    </div>\n    \n    <div class="supported-sites">\n      <ul class="sites-list" id="sitesList">\n        ${he()}\n      </ul>\n      ${ne.length>3?`\n        <button class="toggle-sites-button" id="toggleSitesButton">\n          ${le("showMoreSites",[ne.length-3])}\n        </button>\n      `:""}\n    </div>\n    \n    <div class="instructions">\n      <p><strong>${le("needMoreSites")}</strong> ${le("contactUs")} <a href="mailto:support@kizuna.ai" target="_blank">support@kizuna.ai</a> ${le("contributeCode")} <a href="https://github.com/kizuna-ai-lab/sokuji" target="_blank">${le("openSourceProject")}</a>.</p>\n    </div>\n  `}(s),function(e,t){const s=document.getElementById("openSidePanel");t&&s&&s.addEventListener("click",(async()=>{oe("popup_open_sidepanel_clicked",{tab_id:e,is_supported_site:t});try{await chrome.sidePanel.open({tabId:e}),oe("sidepanel_opened_from_popup",{tab_id:e,method:"direct_api"}),window.close()}catch(t){console.error("[Sokuji] [Popup] Error opening side panel:",t),oe("sidepanel_open_error",{tab_id:e,error_type:"direct_api_failed",error_message:t.message});try{await chrome.runtime.sendMessage({type:"OPEN_SIDE_PANEL",tabId:e}),oe("sidepanel_opened_from_popup",{tab_id:e,method:"background_message"}),window.close()}catch(t){console.error("[Sokuji] [Popup] Fallback failed:",t),oe("sidepanel_open_error",{tab_id:e,error_type:"background_message_failed",error_message:t.message}),alert("Unable to open Sokuji. Please try refreshing the page.")}}}));const i=document.getElementById("toggleSitesButton");if(i){let e=!1;i.addEventListener("click",(()=>{document.getElementById("sitesList");const s=document.querySelectorAll(".site-item");e=!e,e?(s.forEach(((e,t)=>{t>=3&&e.classList.remove("hidden-site")})),i.textContent=le("showLessSites"),oe("popup_show_more_sites_clicked",{total_sites:ne.length,hidden_sites_count:ne.length-3,is_supported_site:t})):(s.forEach(((e,t)=>{t>=3&&e.classList.add("hidden-site")})),i.textContent=le("showMoreSites",[ne.length-3]),oe("popup_show_less_sites_clicked",{total_sites:ne.length,hidden_sites_count:ne.length-3,is_supported_site:t})),de(t)}))}de(t);const r=document.getElementById("storeLink");r&&r.addEventListener("click",(()=>{const e=ce(),s=ue();oe("popup_store_link_clicked",{browser_type:s,store_type:"edge"===s?"edge_addons":"chrome_webstore",store_url:e.url,is_supported_site:t})}))}(e.id,i)}()}catch(e){console.error("[Sokuji] [Popup] Error initializing popup:",e),ge()}}))})();